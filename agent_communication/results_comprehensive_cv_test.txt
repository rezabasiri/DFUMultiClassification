================================================================================
COMPREHENSIVE CV TEST RESULTS
================================================================================

Test completed: 2025-12-23 09:53:47

Configuration:
  Image size: 32x32
  Batch size: 16
  Max epochs: 10
  CV folds: 3
  Running on: CPU (forced for consistency)

================================================================================
SUMMARY TABLE
================================================================================
Modality                       Avg Acc    Avg F1     Min F1     Status         
--------------------------------------------------------------------------------
metadata                       N/A        N/A        N/A        ❌ FAILED       
depth_rgb                      N/A        N/A        N/A        ❌ FAILED       
depth_map                      N/A        N/A        N/A        ❌ FAILED       
thermal_map                    N/A        N/A        N/A        ❌ FAILED       
metadata+depth_rgb             N/A        N/A        N/A        ❌ FAILED       

================================================================================
DETAILED RESULTS
================================================================================

================================================================================
Modality: metadata
================================================================================

❌ TEST FAILED
Error: cannot access free variable 'StandardScaler' where it is not associated with a value in enclosing scope

Traceback:
Traceback (most recent call last):
  File "/home/rezab/projects/DFUMultiClassification/agent_communication/test_comprehensive_cv.py", line 163, in run_modality_test
    results = cross_validation_manual_split(
              ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/rezab/projects/DFUMultiClassification/src/training/training_utils.py", line 918, in cross_validation_manual_split
    data_manager.process_all_modalities()
  File "/home/rezab/projects/DFUMultiClassification/src/training/training_utils.py", line 263, in process_all_modalities
    temp_train, _, _, _, _, _ = prepare_cached_datasets(
                                ^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/rezab/projects/DFUMultiClassification/src/data/dataset_utils.py", line 961, in prepare_cached_datasets
    train_data, rf_model1, rf_model2 = preprocess_split(source_data, is_training=True, class_weight_dict_binary1=class_weight_dict_binary1, class_weight_dict_binary2=class_weight_dict_binary2)
                                       ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/rezab/projects/DFUMultiClassification/src/data/dataset_utils.py", line 823, in preprocess_split
    scaler = StandardScaler()
             ^^^^^^^^^^^^^^
NameError: cannot access free variable 'StandardScaler' where it is not associated with a value in enclosing scope


================================================================================
Modality: depth_rgb
================================================================================

❌ TEST FAILED
Error: cannot access free variable 'StandardScaler' where it is not associated with a value in enclosing scope

Traceback:
Traceback (most recent call last):
  File "/home/rezab/projects/DFUMultiClassification/agent_communication/test_comprehensive_cv.py", line 163, in run_modality_test
    results = cross_validation_manual_split(
              ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/rezab/projects/DFUMultiClassification/src/training/training_utils.py", line 918, in cross_validation_manual_split
    data_manager.process_all_modalities()
  File "/home/rezab/projects/DFUMultiClassification/src/training/training_utils.py", line 263, in process_all_modalities
    temp_train, _, _, _, _, _ = prepare_cached_datasets(
                                ^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/rezab/projects/DFUMultiClassification/src/data/dataset_utils.py", line 961, in prepare_cached_datasets
    train_data, rf_model1, rf_model2 = preprocess_split(source_data, is_training=True, class_weight_dict_binary1=class_weight_dict_binary1, class_weight_dict_binary2=class_weight_dict_binary2)
                                       ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/rezab/projects/DFUMultiClassification/src/data/dataset_utils.py", line 823, in preprocess_split
    scaler = StandardScaler()
             ^^^^^^^^^^^^^^
NameError: cannot access free variable 'StandardScaler' where it is not associated with a value in enclosing scope


================================================================================
Modality: depth_map
================================================================================

❌ TEST FAILED
Error: cannot access free variable 'StandardScaler' where it is not associated with a value in enclosing scope

Traceback:
Traceback (most recent call last):
  File "/home/rezab/projects/DFUMultiClassification/agent_communication/test_comprehensive_cv.py", line 163, in run_modality_test
    results = cross_validation_manual_split(
              ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/rezab/projects/DFUMultiClassification/src/training/training_utils.py", line 918, in cross_validation_manual_split
    data_manager.process_all_modalities()
  File "/home/rezab/projects/DFUMultiClassification/src/training/training_utils.py", line 263, in process_all_modalities
    temp_train, _, _, _, _, _ = prepare_cached_datasets(
                                ^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/rezab/projects/DFUMultiClassification/src/data/dataset_utils.py", line 961, in prepare_cached_datasets
    train_data, rf_model1, rf_model2 = preprocess_split(source_data, is_training=True, class_weight_dict_binary1=class_weight_dict_binary1, class_weight_dict_binary2=class_weight_dict_binary2)
                                       ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/rezab/projects/DFUMultiClassification/src/data/dataset_utils.py", line 823, in preprocess_split
    scaler = StandardScaler()
             ^^^^^^^^^^^^^^
NameError: cannot access free variable 'StandardScaler' where it is not associated with a value in enclosing scope


================================================================================
Modality: thermal_map
================================================================================

❌ TEST FAILED
Error: cannot access free variable 'StandardScaler' where it is not associated with a value in enclosing scope

Traceback:
Traceback (most recent call last):
  File "/home/rezab/projects/DFUMultiClassification/agent_communication/test_comprehensive_cv.py", line 163, in run_modality_test
    results = cross_validation_manual_split(
              ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/rezab/projects/DFUMultiClassification/src/training/training_utils.py", line 918, in cross_validation_manual_split
    data_manager.process_all_modalities()
  File "/home/rezab/projects/DFUMultiClassification/src/training/training_utils.py", line 263, in process_all_modalities
    temp_train, _, _, _, _, _ = prepare_cached_datasets(
                                ^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/rezab/projects/DFUMultiClassification/src/data/dataset_utils.py", line 961, in prepare_cached_datasets
    train_data, rf_model1, rf_model2 = preprocess_split(source_data, is_training=True, class_weight_dict_binary1=class_weight_dict_binary1, class_weight_dict_binary2=class_weight_dict_binary2)
                                       ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/rezab/projects/DFUMultiClassification/src/data/dataset_utils.py", line 823, in preprocess_split
    scaler = StandardScaler()
             ^^^^^^^^^^^^^^
NameError: cannot access free variable 'StandardScaler' where it is not associated with a value in enclosing scope


================================================================================
Modality: metadata+depth_rgb
================================================================================

❌ TEST FAILED
Error: cannot access free variable 'StandardScaler' where it is not associated with a value in enclosing scope

Traceback:
Traceback (most recent call last):
  File "/home/rezab/projects/DFUMultiClassification/agent_communication/test_comprehensive_cv.py", line 163, in run_modality_test
    results = cross_validation_manual_split(
              ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/rezab/projects/DFUMultiClassification/src/training/training_utils.py", line 918, in cross_validation_manual_split
    data_manager.process_all_modalities()
  File "/home/rezab/projects/DFUMultiClassification/src/training/training_utils.py", line 263, in process_all_modalities
    temp_train, _, _, _, _, _ = prepare_cached_datasets(
                                ^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/rezab/projects/DFUMultiClassification/src/data/dataset_utils.py", line 961, in prepare_cached_datasets
    train_data, rf_model1, rf_model2 = preprocess_split(source_data, is_training=True, class_weight_dict_binary1=class_weight_dict_binary1, class_weight_dict_binary2=class_weight_dict_binary2)
                                       ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/rezab/projects/DFUMultiClassification/src/data/dataset_utils.py", line 823, in preprocess_split
    scaler = StandardScaler()
             ^^^^^^^^^^^^^^
NameError: cannot access free variable 'StandardScaler' where it is not associated with a value in enclosing scope


================================================================================
FINAL VERDICT
================================================================================

Total tests: 5
  ✅ Successful: 0
  ❌ Failed: 5
  ⚠️  With leaks: 0
  ✅ Good results (no leaks, Min F1>0.1): 0

❌ FAILURE - No modalities achieved good results
   This suggests Phase 9 fix may not generalize to all modalities
   Recommendation: Investigate image-based modalities separately
